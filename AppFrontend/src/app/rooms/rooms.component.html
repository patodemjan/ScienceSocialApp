<div class="rooms-header">
  <h1 class="title">Rooms</h1>

  <div class="search-bar">
    <input
      type="text"
      placeholder="Search room..."
      [(ngModel)]="searchTerm"
      class="search-input"
    />
    <button (click)="searchRooms()" class="search-btn">Search Room</button>
    <button (click)="viewAllRooms()" class="view-all-btn">View All Rooms</button>
  </div>
</div>

<div class="rooms-table">
  <!-- ĽAVÝ STĹPEC – miestnosti -->
  <div class="rooms-grid">
    <div
      class="room-card"
      *ngFor="let room of filteredRooms"
      (click)="openRoom(room._id)"
    >
      <div class="room-header">{{ room.name }}</div>
      <img [src]="room.imageUrl" [alt]="room.name" />
    </div>
  </div>

  <!-- Zvislá deliaca čiara -->
  <div class="divider"></div>

  <!-- PRAVÝ STĹPEC – tlačidlo a obľúbené miestnosti -->
  <div class="sidebar">
    <div class="create-room-section">
      <button
        class="create-room-btn"
        [class.disabled]="!isLoggedIn"
        [disabled]="!isLoggedIn"
        (click)="goToCreateRoom()"
      >
        Create Room
      </button>
    </div>

    <div class="favorites-section">
      <h3>Favorite Rooms</h3>
      <div *ngIf="favorites.length === 0" class="empty-fav">
        Žiadne obľúbené miestnosti
      </div>

      <div
        class="favorite-item"
        *ngFor="let fav of favorites"
        (click)="openRoom(fav._id)"
      >
        <p>{{ fav.name }}</p>
      </div>
    </div>
  </div>
</div>

<!-- CREATE ROOM MODAL -->
<div class="modal-overlay" *ngIf="showCreateRoomModal">
  <div class="modal">
    <h2>Create New Room</h2>

    <label>Room Name:</label>
    <input type="text" [(ngModel)]="newRoomName" placeholder="Enter room name" />

    <label>Description:</label>
    <textarea [(ngModel)]="newRoomDescription" placeholder="Short description"></textarea>

    <label>Room Image (.webp/.jpg/.jpeg):</label>
    <input type="file" accept=".webp,.jpg,.jpeg" (change)="onImageSelected($event)" />

    <div class="modal-buttons">
      <button (click)="createRoom()">Create</button>
      <button class="cancel-btn" (click)="closeModal()">Cancel</button>
    </div>
  </div>
</div>
